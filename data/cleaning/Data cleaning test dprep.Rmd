---
title: "DataCleaning_test_2"
author: "Marc Lefebvre"
date: "16/03/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

* Duplicate users: 
    + How many tweets from duplicate user?
    + Is there a combination of positive and negative tweets?
      + This is necessary for Dprep and not oDCM. The textblob function in R looks like this for example: Sentiment(classification='pos', p_pos=0.5057908299783777, p_neg=0.49420917002162196)--> Here classified as positive sentiment as seen on:https://stackabuse.com/sentiment-analysis-in-python-with-textblob/, but why tho, since it is almost 50/50.
    + Is it possible to delete all but one tweet without jeopardizing the data analysis?
    
* Text:
    + Remove 'Replying to', user handles and [0-9]* others from Comment
    + Remove 'Quote Tweet' and https: (links) from responding
    + Remove hyperlinks from Comment/Responding
    + Decoding non-ASCII encodings (e.g. @thierrybaudet!âƒ or #wappies â€™Ik blijf)
      + Is there an easier way than examples like this on stackflow: https://stackoverflow.com/questions/42959434/decode-non-ascii-characters-in-an-ascii-file
      
* Reply.count:
    + Remove NA and replace thousands (e.g. 1.9k) by 1900
    
* Retweets:
    + Remove NA and replace thousands (e.g. 1.9k) by 1900 
    
* Like.count
    + Remove NA and replace thousands (e.g. 1.9k) by 1900		
    
* While scraping, we'd ideally like to randomly assign a number to each username and show that number in the database.

## Data cleaning script

### import packages

```{}
library(tm)
library(tidyverse)
library(stringr)
tweets <- read.csv("coronavaccin_tweets_8maart2020.csv")

```

### Remove NA

```{}
tweets <- tweets %>% 
  mutate(Reply.count = replace(Reply.count, is.na(Reply.count), "0")) %>% 
  mutate(Retweets = replace(Retweets, is.na(Retweets), "0")) %>% 
  mutate(Like.count = replace(Like.count, is.na(Like.count), "0"))

```

### Clean Comment column

```{}
tweetscom <- str_remove_all(tweets$Comment, "Replying to ")
tweets["Comment_clean"] <- tweetscom
tweetsand <- str_remove_all(tweets$Comment_clean, " and ")
tweets["Comment_clean"] <- tweetsand
tweetsother <- str_remove_all(tweets$Comment_clean, " other ")
tweets["Comment_clean"] <- tweetsother
tweetsothers <- str_remove_all(tweets$Comment_clean, " others")
tweets["Comment_clean"] <- tweetsothers
tweets$Comment_clean <- gsub(" ?@\\w+ ?", "", tweets$Comment_clean)
tweets$Comment_clean <- gsub('[0-9]+', "", tweets$Comment_clean)

```

### Clean Responding column

```{}
tweets$Responding <- gsub("Quote.*" , "", tweets$Responding)

```

### Remove Comment column and add Comment_clean to correct position

```{}
tweets$Comment <- NULL
tweets <- tweets[, c(1, 2, 3, 8, 4, 5, 6, 7)]

```

